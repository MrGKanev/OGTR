<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì—Ä–∞–¥—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –Ω–∞ –∞–≤—Ç–æ–±—É—Å–∏ –∏ —Ç—Ä–æ–ª–µ–π–±—É—Å–∏</title>

    <!-- Primary Meta Tags -->
    <meta name="description" content="–ë–µ–∑–ø–ª–∞—Ç–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –Ω–∞ –≥—Ä–∞–¥—Å–∫–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ –†—É—Å–µ, –ë—ä–ª–≥–∞—Ä–∏—è. 7 —Ç—Ä–æ–ª–µ–π–±—É—Å–Ω–∏ –∏ 17 –∞–≤—Ç–æ–±—É—Å–Ω–∏ –ª–∏–Ω–∏–∏ —Å –º–∞—Ä—à—Ä—É—Ç–∏, —Å–ø–∏—Ä–∫–∏ –∏ —Ä–∞–∑–ø–∏—Å–∞–Ω–∏—è. –ù–∞–º–µ—Ä–∏ –Ω–∞–π-–±–ª–∏–∑–∫–∞—Ç–∞ —Å–ø–∏—Ä–∫–∞ –∏ –≤–∏–∂ –∫–æ–≥–∞ –∏–¥–≤–∞ –∞–≤—Ç–æ–±—É—Å—ä—Ç.">
    <meta name="keywords" content="–≥—Ä–∞–¥—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ, –∞–≤—Ç–æ–±—É—Å–∏ –†—É—Å–µ, —Ç—Ä–æ–ª–µ–π–±—É—Å–∏ –†—É—Å–µ, —Ä–∞–∑–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–±—É—Å–∏ –†—É—Å–µ, –∫–∞—Ä—Ç–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ, —Å–ø–∏—Ä–∫–∏ –†—É—Å–µ, –º–∞—Ä—à—Ä—É—Ç–∏ –†—É—Å–µ, –æ–±—â–µ—Å—Ç–≤–µ–Ω —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –ë—ä–ª–≥–∞—Ä–∏—è">
    <meta name="author" content="OGTR - –û—Ç–≤–æ—Ä–µ–Ω –ì—Ä–∞–¥—Å–∫–∏ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Bulgarian">
    <meta name="geo.region" content="BG-18">
    <meta name="geo.placename" content="–†—É—Å–µ">
    <meta name="geo.position" content="43.8486;25.9534">
    <meta name="ICBM" content="43.8486, 25.9534">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://YOUR_USERNAME.github.io/OGTR/">
    <meta property="og:title" content="–ì—Ä–∞–¥—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞">
    <meta property="og:description" content="–ë–µ–∑–ø–ª–∞—Ç–Ω–∞ –∫–∞—Ä—Ç–∞ –Ω–∞ –≥—Ä–∞–¥—Å–∫–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ –†—É—Å–µ. 7 —Ç—Ä–æ–ª–µ–π–±—É—Å–Ω–∏ –∏ 17 –∞–≤—Ç–æ–±—É—Å–Ω–∏ –ª–∏–Ω–∏–∏ —Å –º–∞—Ä—à—Ä—É—Ç–∏, —Å–ø–∏—Ä–∫–∏ –∏ —Ä–∞–∑–ø–∏—Å–∞–Ω–∏—è –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ.">
    <meta property="og:locale" content="bg_BG">
    <meta property="og:site_name" content="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="–ì—Ä–∞–¥—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞">
    <meta name="twitter:description" content="–ë–µ–∑–ø–ª–∞—Ç–Ω–∞ –∫–∞—Ä—Ç–∞ –Ω–∞ –∞–≤—Ç–æ–±—É—Å–∏ –∏ —Ç—Ä–æ–ª–µ–π–±—É—Å–∏ –≤ –†—É—Å–µ. –ú–∞—Ä—à—Ä—É—Ç–∏, —Å–ø–∏—Ä–∫–∏ –∏ —Ä–∞–∑–ø–∏—Å–∞–Ω–∏—è.">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://YOUR_USERNAME.github.io/OGTR/">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "–ì—Ä–∞–¥—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ",
        "alternateName": "OGTR - –û—Ç–≤–æ—Ä–µ–Ω –ì—Ä–∞–¥—Å–∫–∏ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ",
        "description": "–ë–µ–∑–ø–ª–∞—Ç–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –Ω–∞ –≥—Ä–∞–¥—Å–∫–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ –†—É—Å–µ, –ë—ä–ª–≥–∞—Ä–∏—è —Å –∞–≤—Ç–æ–±—É—Å–Ω–∏ –∏ —Ç—Ä–æ–ª–µ–π–±—É—Å–Ω–∏ –ª–∏–Ω–∏–∏, —Å–ø–∏—Ä–∫–∏ –∏ —Ä–∞–∑–ø–∏—Å–∞–Ω–∏—è.",
        "url": "https://YOUR_USERNAME.github.io/OGTR/",
        "applicationCategory": "TransportApplication",
        "operatingSystem": "Any",
        "browserRequirements": "Requires JavaScript",
        "inLanguage": "bg",
        "isAccessibleForFree": true,
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "BGN"
        },
        "areaServed": {
            "@type": "City",
            "name": "–†—É—Å–µ",
            "containedInPlace": {
                "@type": "Country",
                "name": "–ë—ä–ª–≥–∞—Ä–∏—è"
            }
        },
        "about": {
            "@type": "PublicTransportRoute",
            "name": "–ì—Ä–∞–¥—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ",
            "serviceLocation": {
                "@type": "City",
                "name": "–†—É—Å–µ",
                "geo": {
                    "@type": "GeoCoordinates",
                    "latitude": 43.8486,
                    "longitude": 25.9534
                }
            }
        }
    }
    </script>

    <!-- Leaflet CSS (local) -->
    <link rel="stylesheet" href="vendor/leaflet/leaflet.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Favicon & Icons -->
    <link rel="icon" type="image/svg+xml" href="icons/icon.svg">
    <link rel="apple-touch-icon" href="icons/icon.svg">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ">
    <meta name="mobile-web-app-capable" content="yes">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1 class="logo">
                <span class="logo-icon">üöç</span>
                <span class="logo-text">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ</span>
            </h1>
            <div class="header-actions">
                <button class="header-btn" id="darkModeToggle" aria-label="–¢—ä–º–µ–Ω —Ä–µ–∂–∏–º" title="–¢—ä–º–µ–Ω —Ä–µ–∂–∏–º (D)">
                    <span class="icon-light">üåô</span>
                    <span class="icon-dark">‚òÄÔ∏è</span>
                </button>
                <button class="menu-toggle" aria-label="–ú–µ–Ω—é" id="menuToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Offline Indicator -->
    <div class="offline-indicator" id="offlineIndicator">
        <span>üì°</span> –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º
    </div>

    <!-- PWA Install Prompt -->
    <div class="install-prompt" id="installPrompt">
        <div class="install-prompt-content">
            <span class="install-icon">üì≤</span>
            <div class="install-text">
                <strong>–ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ</strong>
                <span>–ó–∞ –±—ä—Ä–∑ –¥–æ—Å—Ç—ä–ø –æ—Ç –Ω–∞—á–∞–ª–Ω–∏—è –µ–∫—Ä–∞–Ω</span>
            </div>
            <button class="install-btn" id="installBtn">–ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π</button>
            <button class="install-close" id="installClose" aria-label="–ó–∞—Ç–≤–æ—Ä–∏">√ó</button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title-row">
                    <h2>–õ–∏–Ω–∏–∏</h2>
                    <div class="sidebar-actions">
                        <button class="sidebar-action-btn" id="nearbyBtn" title="–ù–∞–π-–±–ª–∏–∑–∫–∏ —Å–ø–∏—Ä–∫–∏ (N)">
                            <span>üìç</span>
                        </button>
                        <button class="sidebar-action-btn" id="favoritesBtn" title="–õ—é–±–∏–º–∏ (F)">
                            <span>‚≠ê</span>
                        </button>
                    </div>
                </div>
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">–í—Å–∏—á–∫–∏</button>
                    <button class="filter-tab" data-filter="trolleybus">–¢—Ä–æ–ª–µ–π–±—É—Å–∏</button>
                    <button class="filter-tab" data-filter="bus">–ê–≤—Ç–æ–±—É—Å–∏</button>
                    <button class="filter-tab" data-filter="favorites">‚≠ê</button>
                </div>
            </div>

            <!-- Nearby Stops Panel -->
            <div class="nearby-panel" id="nearbyPanel">
                <div class="nearby-header">
                    <h3>üìç –ù–∞–π-–±–ª–∏–∑–∫–∏ —Å–ø–∏—Ä–∫–∏</h3>
                    <button class="nearby-close" id="nearbyClose">√ó</button>
                </div>
                <div class="nearby-content" id="nearbyContent">
                    <p class="nearby-loading">–û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –ª–æ–∫–∞—Ü–∏—è...</p>
                </div>
            </div>

            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input type="text" id="searchInput" placeholder="–¢—ä—Ä—Å–∏ –ª–∏–Ω–∏—è –∏–ª–∏ —Å–ø–∏—Ä–∫–∞..." aria-label="–¢—ä—Ä—Å–µ–Ω–µ">
                <button type="button" class="search-clear" id="searchClear" aria-label="–ò–∑—á–∏—Å—Ç–∏ —Ç—ä—Ä—Å–µ–Ω–µ—Ç–æ">√ó</button>
            </div>

            <div class="lines-list" id="linesList">
                <!-- Lines will be populated by JavaScript -->
            </div>

            <!-- Line Details Panel -->
            <div class="line-details" id="lineDetails">
                <div class="details-top-bar">
                    <button class="back-btn" id="backBtn">‚Üê –ù–∞–∑–∞–¥</button>
                    <div class="details-actions">
                        <button class="detail-action-btn" id="favoriteLineBtn" title="–î–æ–±–∞–≤–∏ –≤ –ª—é–±–∏–º–∏">
                            <span class="fav-icon-empty">‚òÜ</span>
                            <span class="fav-icon-full">‚òÖ</span>
                        </button>
                        <button class="detail-action-btn" id="exportScheduleBtn" title="–ü—Ä–∏–Ω—Ç–∏—Ä–∞–π —Ä–∞–∑–ø–∏—Å–∞–Ω–∏–µ">
                            <span>üñ®Ô∏è</span>
                        </button>
                        <button class="detail-action-btn" id="shareLineBtn" title="–°–ø–æ–¥–µ–ª–∏ –ª–∏–Ω–∏—è">
                            <span>üîó</span>
                        </button>
                    </div>
                </div>
                <div class="line-header">
                    <span class="line-badge" id="detailBadge">21</span>
                    <div class="line-info">
                        <h3 id="detailName">–õ–∏–Ω–∏—è 21</h3>
                        <span class="line-type" id="detailType">–¢—Ä–æ–ª–µ–π–±—É—Å</span>
                    </div>
                </div>
                <div class="line-route" id="detailRoute">
                    <!-- Route stops will be populated -->
                </div>
                <div class="line-schedule" id="detailSchedule">
                    <h4>–†–∞–∑–ø–∏—Å–∞–Ω–∏–µ</h4>
                    <div class="schedule-content">
                        <!-- Schedule will be populated -->
                    </div>
                </div>
            </div>
        </aside>

        <!-- Map Container -->
        <div class="map-container">
            <div id="map"></div>

            <!-- Map Controls -->
            <div class="map-controls">
                <button class="map-control-btn" id="locateBtn" title="–ú–æ—è—Ç–∞ –ª–æ–∫–∞—Ü–∏—è">
                    üìç
                </button>
                <button class="map-control-btn" id="resetBtn" title="–ü–æ–∫–∞–∂–∏ —Ü–µ–ª–∏—è –≥—Ä–∞–¥">
                    üîÑ
                </button>
            </div>

            <!-- Legend -->
            <div class="map-legend" id="mapLegend">
                <button class="legend-toggle" id="legendToggle">–õ–µ–≥–µ–Ω–¥–∞ ‚ñº</button>
                <div class="legend-content">
                    <div class="legend-item">
                        <span class="legend-line trolleybus-line"></span>
                        <span>–¢—Ä–æ–ª–µ–π–±—É—Å</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-line bus-line"></span>
                        <span>–ê–≤—Ç–æ–±—É—Å</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-stop"></span>
                        <span>–°–ø–∏—Ä–∫–∞</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Info Modal -->
    <div class="modal" id="infoModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <h2>–ó–∞ –ø—Ä–æ–µ–∫—Ç–∞</h2>
            <p>–¢–∞–∑–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –µ –æ—Ç–≤–æ—Ä–µ–Ω –ø—Ä–æ–µ–∫—Ç (open source) –∑–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –≥—Ä–∞–¥—Å–∫–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ –†—É—Å–µ.</p>
            <h3>–î–∞–Ω–Ω–∏</h3>
            <p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è—Ç–∞ –∑–∞ –ª–∏–Ω–∏–∏—Ç–µ –∏ —Ä–∞–∑–ø–∏—Å–∞–Ω–∏—è—Ç–∞ –µ —Å—ä–±—Ä–∞–Ω–∞ –æ—Ç –ø—É–±–ª–∏—á–Ω–∏ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏:</p>
            <ul>
                <li><a href="https://transport.obshtinaruse.bg" target="_blank">–û–±—â–∏–Ω–∞ –†—É—Å–µ - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</a></li>
                <li><a href="https://www.transport-ruse.com/" target="_blank">–û–±—â–∏–Ω—Å–∫–∏ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ</a></li>
                <li><a href="https://gtruse.wixsite.com/gtruse" target="_blank">–ì—Ä–∞–¥—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –†—É—Å–µ</a></li>
            </ul>
            <h3>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h3>
            <p>–ö–∞—Ä—Ç–∞—Ç–∞ –∏–∑–ø–æ–ª–∑–≤–∞ <a href="https://leafletjs.com" target="_blank">Leaflet.js</a> –∏ <a href="https://www.openstreetmap.org" target="_blank">OpenStreetMap</a>.</p>
            <p class="disclaimer">–ó–∞–±–µ–ª–µ–∂–∫–∞: –ú–∞—Ä—à—Ä—É—Ç–∏—Ç–µ —Å–∞ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª–Ω–∏. –ó–∞ —Ç–æ—á–Ω–∏ —Ä–∞–∑–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª–Ω–∏—Ç–µ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏.</p>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∫–∞—Ä—Ç–∞—Ç–∞...</p>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div class="modal" id="shortcutsModal">
        <div class="modal-content shortcuts-content">
            <button class="modal-close" id="shortcutsClose">&times;</button>
            <h2>‚å®Ô∏è –ö–ª–∞–≤–∏—à–Ω–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏</h2>
            <div class="shortcuts-list">
                <div class="shortcut-item"><kbd>/</kbd> <span>–¢—ä—Ä—Å–µ–Ω–µ</span></div>
                <div class="shortcut-item"><kbd>Esc</kbd> <span>–ó–∞—Ç–≤–æ—Ä–∏ / –ù–∞–∑–∞–¥</span></div>
                <div class="shortcut-item"><kbd>D</kbd> <span>–¢—ä–º–µ–Ω —Ä–µ–∂–∏–º</span></div>
                <div class="shortcut-item"><kbd>F</kbd> <span>–õ—é–±–∏–º–∏</span></div>
                <div class="shortcut-item"><kbd>N</kbd> <span>–ù–∞–π-–±–ª–∏–∑–∫–∏ —Å–ø–∏—Ä–∫–∏</span></div>
                <div class="shortcut-item"><kbd>R</kbd> <span>–ù—É–ª–∏—Ä–∞–π –∏–∑–≥–ª–µ–¥–∞</span></div>
                <div class="shortcut-item"><kbd>L</kbd> <span>–ú–æ—è—Ç–∞ –ª–æ–∫–∞—Ü–∏—è</span></div>
                <div class="shortcut-item"><kbd>?</kbd> <span>–ü–æ–∫–∞–∂–∏ –ø–æ–º–æ—â</span></div>
            </div>
        </div>
    </div>

    <!-- Leaflet JS (local) -->
    <script src="vendor/leaflet/leaflet.js"></script>

    <!-- Application Scripts -->
    <script src="js/data-normalized.js"></script>
    <script src="js/app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('SW registered:', reg.scope))
                    .catch(err => console.log('SW registration failed:', err));
            });
        }
    </script>
</body>
</html>

/**
 * Route GeoJSON data for Ruse Transit Map
 * Routes follow actual streets using OSRM routing data
 *
 * Coordinate format: [longitude, latitude] (GeoJSON standard)
 */

// Street-following route geometries from OSRM
const ROUTE_GEOMETRIES = {
    // Trolleybus Line 2: ж.к. Дружба 3 - Център - ж.к. Чародейка
    'T2': {
        type: 'LineString',
        coordinates: [
            [25.971998, 43.82669],
            [25.971927, 43.826697],
            [25.972019, 43.827098],
            [25.97204, 43.827312],
            [25.972047, 43.827458],
            [25.972006, 43.827601],
            [25.971858, 43.827894],
            [25.971278, 43.828434],
            [25.970908, 43.82875],
            [25.969959, 43.829606],
            [25.969783, 43.829743],
            [25.969504, 43.830006],
            [25.969199, 43.830309],
            [25.968383, 43.831056],
            [25.967865, 43.831468],
            [25.967447, 43.831776],
            [25.967264, 43.831895],
            [25.967197, 43.832174],
            [25.968224, 43.832813],
            [25.968744, 43.833073],
            [25.969225, 43.832698],
            [25.969775, 43.832242],
            [25.970036, 43.832102],
            [25.970458, 43.832427],
            [25.970154, 43.832638],
            [25.96962, 43.833007],
            [25.968733, 43.833622],
            [25.967809, 43.834252],
            [25.967482, 43.834451],
            [25.966869, 43.834862],
            [25.965831, 43.83557],
            [25.964566, 43.836408],
            [25.963814, 43.836916],
            [25.962687, 43.837676],
            [25.960754, 43.839125],
            [25.960303, 43.839483],
            [25.960021, 43.839632],
            [25.959754, 43.83968],
            [25.959439, 43.839696],
            [25.958832, 43.839691],
            [25.957415, 43.839427],
            [25.956769, 43.839341],
            [25.955219, 43.83914],
            [25.955025, 43.839323],
            [25.954978, 43.839576],
            [25.954863, 43.840245],
            [25.954774, 43.840825],
            [25.954569, 43.842088],
            [25.954386, 43.843169],
            [25.954093, 43.844735],
            [25.95405, 43.844984],
            [25.953907, 43.846009],
            [25.953835, 43.846453],
            [25.952197, 43.846409],
            [25.951948, 43.847112],
            [25.95246, 43.847319],
            [25.952848, 43.847573],
            [25.953313, 43.847916],
            [25.953313, 43.847916],
            [25.952848, 43.847573],
            [25.951948, 43.847112],
            [25.950658, 43.847108],
            [25.949762, 43.84714],
            [25.948537, 43.846892],
            [25.947337, 43.847137],
            [25.946238, 43.847435],
            [25.945751, 43.847568],
            [25.945558, 43.847384],
            [25.945045, 43.847108],
            [25.944608, 43.846579],
            [25.944102, 43.845821],
            [25.943822, 43.845083],
            [25.943685, 43.844702],
            [25.943759, 43.844341],
            [25.944046, 43.843967],
            [25.944506, 43.843699],
            [25.944917, 43.843536],
            [25.945168, 43.843276],
            [25.945629, 43.842849],
            [25.946707, 43.841837],
            [25.947299, 43.841258],
            [25.948091, 43.840575],
            [25.948344, 43.840257],
            [25.948442, 43.839873],
            [25.948807, 43.838727],
            [25.949097, 43.837895],
            [25.949705, 43.838155],
            [25.950531, 43.838492],
            [25.950977, 43.838694],
            [25.952174, 43.838809],
            [25.95494, 43.839062],
            [25.956246, 43.839185],
            [25.958652, 43.839556],
            [25.95912, 43.839593],
            [25.95953, 43.839562],
            [25.959894, 43.839478],
            [25.960225, 43.839321],
            [25.960691, 43.838968],
            [25.962453, 43.83766],
            [25.964415, 43.836344],
            [25.965379, 43.835672],
            [25.96675, 43.834768],
            [25.967978, 43.833933],
            [25.968212, 43.833704],
            [25.96811, 43.833549],
            [25.968224, 43.832813]
        ]
    },

    // Trolleybus Line 9: ж.к. Чародейка - Център - ж.к. Дружба 1
    'T9': {
        type: 'LineString',
        coordinates: [
            [25.96601, 43.828003],
            [25.966317, 43.828291],
            [25.967122, 43.828591],
            [25.967729, 43.828826],
            [25.968493, 43.829092],
            [25.969413, 43.829469],
            [25.969876, 43.829682],
            [25.970343, 43.829952],
            [25.970995, 43.83039],
            [25.97139, 43.830721],
            [25.971901, 43.831196],
            [25.972117, 43.831383],
            [25.971398, 43.831835],
            [25.970837, 43.832187],
            [25.970154, 43.832638],
            [25.96962, 43.833007],
            [25.968733, 43.833622],
            [25.967809, 43.834252],
            [25.96718, 43.834662],
            [25.965831, 43.83557],
            [25.964566, 43.836408],
            [25.963814, 43.836916],
            [25.962687, 43.837676],
            [25.960754, 43.839125],
            [25.960178, 43.839555],
            [25.959754, 43.83968],
            [25.959033, 43.839706],
            [25.957415, 43.839427],
            [25.95639, 43.839294],
            [25.955062, 43.839119],
            [25.954978, 43.839576],
            [25.954809, 43.840616],
            [25.954569, 43.842088],
            [25.954386, 43.843169],
            [25.954066, 43.844884],
            [25.953907, 43.846009],
            [25.953697, 43.846447],
            [25.951948, 43.847112],
            [25.952607, 43.847413],
            [25.953243, 43.847853],
            [25.953313, 43.847916],
            [25.952783, 43.847527],
            [25.951948, 43.847112],
            [25.950658, 43.847108],
            [25.949748, 43.847137],
            [25.948338, 43.846845],
            [25.946503, 43.847363],
            [25.945751, 43.847568],
            [25.945149, 43.847186],
            [25.944608, 43.846579],
            [25.944102, 43.845821],
            [25.943822, 43.845083],
            [25.943759, 43.844341],
            [25.944188, 43.843874],
            [25.944829, 43.843585],
            [25.945629, 43.842849],
            [25.946812, 43.841732],
            [25.947956, 43.840711],
            [25.948344, 43.840257],
            [25.948732, 43.838977],
            [25.949097, 43.837895],
            [25.949366, 43.836917],
            [25.949801, 43.835741],
            [25.950057, 43.834745],
            [25.950219, 43.833078],
            [25.950401, 43.831751],
            [25.950358, 43.831244],
            [25.950148, 43.830952],
            [25.949633, 43.830345],
            [25.949401, 43.829945],
            [25.949336, 43.829586],
            [25.949316, 43.828355],
            [25.949261, 43.828045],
            [25.949635, 43.827496],
            [25.950389, 43.826861],
            [25.951516, 43.826808],
            [25.953457, 43.82757],
            [25.954916, 43.827968],
            [25.955002, 43.827997]
        ]
    },

    // Trolleybus Line 13: Гара Разпределителна - Център - ж.к. Дружба 2
    'T13': {
        type: 'LineString',
        coordinates: [
            [25.986996, 43.855017],
            [25.985617, 43.854833],
            [25.982708, 43.854441],
            [25.981627, 43.854065],
            [25.979945, 43.853488],
            [25.979239, 43.853386],
            [25.978915, 43.853464],
            [25.978646, 43.853337],
            [25.978642, 43.853145],
            [25.978826, 43.852204],
            [25.979162, 43.850579],
            [25.976673, 43.850251],
            [25.975412, 43.849845],
            [25.973137, 43.849012],
            [25.96746, 43.847443],
            [25.96627, 43.847108],
            [25.964743, 43.846662],
            [25.963353, 43.846489],
            [25.961024, 43.846133],
            [25.960568, 43.846173],
            [25.960226, 43.846305],
            [25.959899, 43.846235],
            [25.959578, 43.845934],
            [25.958206, 43.845616],
            [25.957219, 43.845294],
            [25.956411, 43.845008],
            [25.955731, 43.844891],
            [25.954803, 43.844909],
            [25.954066, 43.844884],
            [25.953931, 43.845835],
            [25.953845, 43.846372],
            [25.952197, 43.846409],
            [25.952607, 43.847413],
            [25.953313, 43.847916],
            [25.952783, 43.847527],
            [25.951705, 43.847097],
            [25.950658, 43.847108],
            [25.949315, 43.847047],
            [25.948338, 43.846845],
            [25.946503, 43.847363],
            [25.945751, 43.847568],
            [25.945045, 43.847108],
            [25.944241, 43.846076],
            [25.94398, 43.845555],
            [25.943685, 43.844702],
            [25.943838, 43.844195],
            [25.944506, 43.843699],
            [25.945168, 43.843276],
            [25.946161, 43.842349],
            [25.947192, 43.841371],
            [25.948091, 43.840575],
            [25.948442, 43.839873],
            [25.948807, 43.838727],
            [25.949222, 43.837402],
            [25.949674, 43.836127],
            [25.949864, 43.835509],
            [25.95015, 43.833745],
            [25.950274, 43.83276],
            [25.950417, 43.831659],
            [25.950358, 43.831244],
            [25.949906, 43.830636],
            [25.949456, 43.830076],
            [25.949352, 43.829762],
            [25.949344, 43.828668],
            [25.949479, 43.828255],
            [25.950249, 43.828566],
            [25.95046, 43.828875],
            [25.950536, 43.829386],
            [25.95096, 43.829613],
            [25.951728, 43.830024],
            [25.953139, 43.830701],
            [25.954625, 43.831301],
            [25.95696, 43.832189],
            [25.958954, 43.830887],
            [25.960623, 43.829828],
            [25.961519, 43.829248],
            [25.963524, 43.827652],
            [25.963386, 43.826812],
            [25.962757, 43.826513],
            [25.962073, 43.826309],
            [25.961403, 43.82629],
            [25.960459, 43.826216],
            [25.960423, 43.824444],
            [25.962028, 43.82441]
        ]
    },

    // Trolleybus Line 21: ж.к. Чародейка Юг - Гара Разпределителна
    'T21': {
        type: 'LineString',
        coordinates: [
            [25.966, 43.828],
            [25.967122, 43.828591],
            [25.968493, 43.829092],
            [25.969876, 43.829682],
            [25.970995, 43.83039],
            [25.972117, 43.831383],
            [25.970837, 43.832187],
            [25.96962, 43.833007],
            [25.967809, 43.834252],
            [25.965831, 43.83557],
            [25.963814, 43.836916],
            [25.960754, 43.839125],
            [25.959754, 43.83968],
            [25.957415, 43.839427],
            [25.955062, 43.839119],
            [25.954978, 43.839576],
            [25.954569, 43.842088],
            [25.954066, 43.844884],
            [25.953907, 43.846009],
            [25.952197, 43.846409],
            [25.952607, 43.847413],
            [25.953313, 43.847916],
            [25.951948, 43.847112],
            [25.949748, 43.847137],
            [25.946503, 43.847363],
            [25.945767, 43.847682],
            [25.9459, 43.848072],
            [25.946283, 43.848481],
            [25.94681, 43.848876],
            [25.947567, 43.849394],
            [25.948006, 43.849719],
            [25.948499, 43.850242],
            [25.949176, 43.850903],
            [25.95006, 43.85186],
            [25.950307, 43.852064],
            [25.950916, 43.852401],
            [25.9518, 43.852516],
            [25.952679, 43.852578],
            [25.953594, 43.852531],
            [25.955922, 43.852523],
            [25.956718, 43.851948],
            [25.957353, 43.851236],
            [25.958137, 43.850272],
            [25.958849, 43.850277],
            [25.959234, 43.850511],
            [25.95998, 43.851374],
            [25.961181, 43.853051],
            [25.961709, 43.853435],
            [25.962099, 43.853704],
            [25.962645, 43.853798],
            [25.963604, 43.853703],
            [25.964025, 43.853532],
            [25.964693, 43.852763],
            [25.964928, 43.852161],
            [25.965822, 43.851067],
            [25.966459, 43.851075],
            [25.968271, 43.851972],
            [25.967682, 43.850876],
            [25.966884, 43.850004],
            [25.965825, 43.85078],
            [25.965192, 43.851441],
            [25.964956, 43.85206],
            [25.964693, 43.852763],
            [25.964142, 43.853661],
            [25.964559, 43.854103],
            [25.965134, 43.854459],
            [25.966648, 43.855196],
            [25.968596, 43.856135],
            [25.970663, 43.857122],
            [25.972733, 43.858139],
            [25.973814, 43.858652],
            [25.975066, 43.857311],
            [25.97609, 43.856391],
            [25.976591, 43.855912],
            [25.975985, 43.855615]
        ]
    },

    // Trolleybus Line 24: ж.к. Дружба 3 - Център - Централна ЖП гара
    'T24': {
        type: 'LineString',
        coordinates: [
            [25.972, 43.8267],
            [25.9718, 43.8279],
            [25.9712, 43.8284],
            [25.9699, 43.8296],
            [25.9692, 43.8303],
            [25.9683, 43.8311],
            [25.9672, 43.8319],
            [25.9665, 43.8324],
            [25.9655, 43.8330],
            [25.9631, 43.8338],
            [25.9600, 43.8340],
            [25.9578, 43.8340],
            [25.9560, 43.8337],
            [25.9555, 43.8340],
            [25.9553, 43.8356],
            [25.9548, 43.8380],
            [25.9540, 43.8420],
            [25.9533, 43.8453],
            [25.9533, 43.8479],
            [25.9522, 43.8475],
            [25.9500, 43.8471],
            [25.9486, 43.8469],
            [25.9463, 43.8474],
            [25.9458, 43.8473]
        ]
    },

    // Trolleybus Line 27: пл. Оборище - Окръжна болница - Русенски университет
    'T27': {
        type: 'LineString',
        coordinates: [
            [25.953313, 43.847916],
            [25.952783, 43.847527],
            [25.951948, 43.847112],
            [25.950658, 43.847108],
            [25.949748, 43.847137],
            [25.946503, 43.847363],
            [25.945767, 43.847682],
            [25.9459, 43.848072],
            [25.946283, 43.848481],
            [25.94681, 43.848876],
            [25.947567, 43.849394],
            [25.948006, 43.849719],
            [25.948499, 43.850242],
            [25.949176, 43.850903],
            [25.95006, 43.85186],
            [25.950307, 43.852064],
            [25.950916, 43.852401],
            [25.9518, 43.852516],
            [25.952679, 43.852578],
            [25.953594, 43.852531],
            [25.955922, 43.852523],
            [25.956718, 43.851948],
            [25.957353, 43.851236],
            [25.958137, 43.850272],
            [25.958849, 43.850277],
            [25.959234, 43.850511],
            [25.95998, 43.851374],
            [25.961181, 43.853051],
            [25.961709, 43.853435],
            [25.962645, 43.853798],
            [25.964188, 43.854127],
            [25.965711, 43.85474],
            [25.967646, 43.855677],
            [25.969567, 43.856599],
            [25.971321, 43.857451],
            [25.973814, 43.858652],
            [25.975066, 43.857311],
            [25.97609, 43.856391],
            [25.975985, 43.855615]
        ]
    },

    // Trolleybus Line 29: ж.к. Чародейка Юг - Захарен завод
    'T29': {
        type: 'LineString',
        coordinates: [
            [25.966, 43.828],
            [25.967729, 43.828826],
            [25.969413, 43.829469],
            [25.970995, 43.83039],
            [25.972117, 43.831383],
            [25.970837, 43.832187],
            [25.96962, 43.833007],
            [25.967809, 43.834252],
            [25.965831, 43.83557],
            [25.963814, 43.836916],
            [25.960754, 43.839125],
            [25.959754, 43.83968],
            [25.955062, 43.839119],
            [25.954569, 43.842088],
            [25.954066, 43.844884],
            [25.953907, 43.846009],
            [25.952197, 43.846409],
            [25.952607, 43.847413],
            [25.953313, 43.847916],
            [25.949748, 43.847137],
            [25.945767, 43.847682],
            [25.946283, 43.848481],
            [25.947567, 43.849394],
            [25.949176, 43.850903],
            [25.950916, 43.852401],
            [25.953594, 43.852531],
            [25.956718, 43.851948],
            [25.958137, 43.850272],
            [25.959234, 43.850511],
            [25.961181, 43.853051],
            [25.962645, 43.853798],
            [25.965711, 43.85474],
            [25.969567, 43.856599],
            [25.973814, 43.858652],
            [25.976771, 43.860124],
            [25.979697, 43.861537],
            [25.981211, 43.862756],
            [25.982513, 43.863839],
            [25.984928, 43.865127],
            [25.987595, 43.866507],
            [25.990054, 43.867474],
            [25.99201, 43.868293],
            [25.995395, 43.869687],
            [25.996658, 43.870262],
            [25.997482, 43.87037],
            [25.998242, 43.870965],
            [25.999505, 43.871553],
            [26.000332, 43.871731],
            [26.007786, 43.873062],
            [26.010483, 43.873645],
            [26.013298, 43.874191],
            [26.014148, 43.874529],
            [26.015842, 43.875462],
            [26.016488, 43.875497],
            [26.016927, 43.875831],
            [26.017374, 43.876474],
            [26.017871, 43.876985],
            [26.018824, 43.877628],
            [26.019789, 43.878281]
        ]
    },

    // Bus Line 11: кв. Мальовица - Дунав мост
    'B11': {
        type: 'LineString',
        coordinates: [
            [25.939845, 43.809839],
            [25.938218, 43.810074],
            [25.937257, 43.809923],
            [25.937127, 43.808882],
            [25.936474, 43.807868],
            [25.936249, 43.806946],
            [25.936427, 43.806685],
            [25.939445, 43.806622],
            [25.94171, 43.806582],
            [25.942031, 43.806698],
            [25.942749, 43.807],
            [25.94244, 43.807283],
            [25.942418, 43.807578],
            [25.942965, 43.808542],
            [25.943557, 43.809595],
            [25.943647, 43.810152],
            [25.943493, 43.811034],
            [25.943106, 43.811685],
            [25.942368, 43.812436],
            [25.941451, 43.81347],
            [25.940652, 43.81461],
            [25.939906, 43.816485],
            [25.939506, 43.817439],
            [25.93915, 43.818065],
            [25.938365, 43.818811],
            [25.93777, 43.819352],
            [25.937283, 43.819984],
            [25.937291, 43.82031],
            [25.937944, 43.821189],
            [25.938812, 43.822221],
            [25.939544, 43.822647],
            [25.940874, 43.823429],
            [25.94159, 43.82394],
            [25.942519, 43.824731],
            [25.943167, 43.825019],
            [25.944751, 43.826275],
            [25.945637, 43.826833],
            [25.947034, 43.827604],
            [25.94802, 43.828106],
            [25.949896, 43.829117],
            [25.949444, 43.82871],
            [25.949476, 43.829604],
            [25.949787, 43.830331],
            [25.950762, 43.831499],
            [25.953289, 43.832716],
            [25.955232, 43.833748],
            [25.955916, 43.834307],
            [25.955548, 43.836117],
            [25.955231, 43.838058],
            [25.955062, 43.839119],
            [25.954863, 43.840245],
            [25.954569, 43.842088],
            [25.954066, 43.844884],
            [25.953845, 43.846372],
            [25.951948, 43.847112],
            [25.952607, 43.847413],
            [25.953313, 43.847916],
            [25.949748, 43.847137],
            [25.945767, 43.847682],
            [25.946283, 43.848481],
            [25.947567, 43.849394],
            [25.948499, 43.850242],
            [25.949841, 43.851628],
            [25.950916, 43.852401],
            [25.953594, 43.852531],
            [25.956718, 43.851948],
            [25.958137, 43.850272],
            [25.959234, 43.850511],
            [25.961181, 43.853051],
            [25.962645, 43.853798],
            [25.965711, 43.85474],
            [25.969567, 43.856599],
            [25.973814, 43.858652],
            [25.976771, 43.860124],
            [25.979697, 43.861537],
            [25.982172, 43.863629],
            [25.985882, 43.865653],
            [25.99201, 43.868293],
            [25.99653, 43.870203],
            [25.997482, 43.87037],
            [25.999505, 43.871553],
            [26.007786, 43.873062],
            [26.012583, 43.874034],
            [26.015717, 43.875394],
            [26.016751, 43.875619],
            [26.017374, 43.876474],
            [26.018193, 43.87721],
            [26.019266, 43.877923],
            [26.022508, 43.880145],
            [26.022787, 43.880258],
            [26.02296, 43.880355],
            [26.022906, 43.880553],
            [26.022562, 43.880539],
            [26.019694, 43.878386],
            [26.018495, 43.877605],
            [26.017776, 43.877128],
            [26.017047, 43.876821],
            [26.016865, 43.877058],
            [26.016499, 43.877769],
            [26.015927, 43.87799],
            [26.015651, 43.878458],
            [26.015198, 43.878971],
            [26.015093, 43.879391],
            [26.014372, 43.880202],
            [26.007834, 43.886762],
            [26.006051, 43.888558]
        ]
    },

    // Bus Line 15: кв. Долапите - Централна ЖП гара
    'B15': {
        type: 'LineString',
        coordinates: [
            [25.931028, 43.79704],
            [25.930631, 43.79649],
            [25.929876, 43.795933],
            [25.928909, 43.795442],
            [25.927489, 43.794643],
            [25.926541, 43.794177],
            [25.92601, 43.794065],
            [25.924714, 43.793957],
            [25.924021, 43.794061],
            [25.92345, 43.794225],
            [25.922176, 43.794747],
            [25.921406, 43.795138],
            [25.920468, 43.795488],
            [25.919637, 43.795619],
            [25.918506, 43.795863],
            [25.918016, 43.796064],
            [25.917704, 43.796384],
            [25.917932, 43.7968],
            [25.918499, 43.797791],
            [25.919177, 43.799004],
            [25.9195, 43.7997],
            [25.920751, 43.802659],
            [25.921158, 43.803631],
            [25.921728, 43.804954],
            [25.922235, 43.806],
            [25.922701, 43.806705],
            [25.923494, 43.807627],
            [25.924392, 43.808455],
            [25.925914, 43.809836],
            [25.926889, 43.810743],
            [25.927325, 43.811254],
            [25.928015, 43.812326],
            [25.928597, 43.813607],
            [25.929104, 43.814764],
            [25.929618, 43.815887],
            [25.929945, 43.816519],
            [25.930486, 43.817248],
            [25.931041, 43.817801],
            [25.931906, 43.818413],
            [25.933361, 43.819177],
            [25.935097, 43.82001],
            [25.937813, 43.821291],
            [25.939767, 43.822333],
            [25.94055, 43.822933],
            [25.942316, 43.824346],
            [25.943726, 43.825444],
            [25.945276, 43.826625],
            [25.947034, 43.827604],
            [25.94802, 43.828106],
            [25.949896, 43.829117],
            [25.949444, 43.82871],
            [25.949476, 43.829604],
            [25.950426, 43.831135],
            [25.951154, 43.831863],
            [25.953289, 43.832716],
            [25.955232, 43.833748],
            [25.955909, 43.83437],
            [25.955548, 43.836117],
            [25.955231, 43.838058],
            [25.955062, 43.839119],
            [25.954863, 43.840245],
            [25.954569, 43.842088],
            [25.954269, 43.843801],
            [25.954066, 43.844884],
            [25.953907, 43.846009],
            [25.953697, 43.846447],
            [25.951948, 43.847112],
            [25.952607, 43.847413],
            [25.953313, 43.847916],
            [25.949748, 43.847137],
            [25.946503, 43.847363],
            [25.945149, 43.847186],
            [25.944608, 43.846579],
            [25.943822, 43.845083],
            [25.943838, 43.844195],
            [25.945168, 43.843276],
            [25.946812, 43.841732],
            [25.948344, 43.840257],
            [25.948807, 43.838727],
            [25.949222, 43.837402],
            [25.949864, 43.835509],
            [25.95015, 43.833745],
            [25.950311, 43.832461],
            [25.950705, 43.831724],
            [25.951154, 43.831863],
            [25.953289, 43.832716],
            [25.955232, 43.833748],
            [25.955526, 43.833476]
        ]
    },

    // Bus Line 3: Център - кв. Средна кула
    'B3': {
        type: 'LineString',
        coordinates: [
            [25.9533, 43.8479],
            [25.9510, 43.8465],
            [25.9480, 43.8445],
            [25.9450, 43.8410],
            [25.9420, 43.8360],
            [25.9380, 43.8300],
            [25.9340, 43.8230],
            [25.9300, 43.8160],
            [25.9270, 43.8100],
            [25.9250, 43.8050]
        ]
    },

    // Bus Line 4: Централна ЖП гара - Източна промишлена зона
    'B4': {
        type: 'LineString',
        coordinates: [
            [25.9556, 43.8334],
            [25.9580, 43.8360],
            [25.9600, 43.8400],
            [25.9533, 43.8479],
            [25.9580, 43.8490],
            [25.9650, 43.8500],
            [25.9750, 43.8510],
            [25.9820, 43.8520],
            [25.9900, 43.8550]
        ]
    },

    // Bus Line 5: Централна ЖП гара - кв. Образцов чифлик
    'B5': {
        type: 'LineString',
        coordinates: [
            [25.9556, 43.8334],
            [25.9580, 43.8330],
            [25.9620, 43.8310],
            [25.9650, 43.8280]
        ]
    },

    // Bus Line 6: Дом на културата - Асфалтова база
    'B6': {
        type: 'LineString',
        coordinates: [
            [25.9510, 43.8495],
            [25.9533, 43.8479],
            [25.9580, 43.8470],
            [25.9650, 43.8480],
            [25.9720, 43.8490],
            [25.9800, 43.8510],
            [25.9850, 43.8530]
        ]
    },

    // Bus Line 8: Център - Западна промишлена зона
    'B8': {
        type: 'LineString',
        coordinates: [
            [25.9533, 43.8479],
            [25.9500, 43.8470],
            [25.9450, 43.8450],
            [25.9400, 43.8420],
            [25.9350, 43.8400]
        ]
    },

    // Bus Line 10: Централна ЖП гара - кв. Здравец
    'B10': {
        type: 'LineString',
        coordinates: [
            [25.9556, 43.8334],
            [25.9550, 43.8360],
            [25.9540, 43.8400],
            [25.9533, 43.8479],
            [25.9560, 43.8420],
            [25.9580, 43.8300],
            [25.9580, 43.8180]
        ]
    },

    // Bus Line 12: Централна ЖП гара - Захарен завод
    'B12': {
        type: 'LineString',
        coordinates: [
            [25.9556, 43.8334],
            [25.9580, 43.8350],
            [25.9620, 43.8380],
            [25.9680, 43.8420],
            [25.9720, 43.8460],
            [25.9760, 43.8500],
            [25.9800, 43.8560],
            [25.9830, 43.8620],
            [25.9860, 43.8680]
        ]
    },

    // Bus Line 16: Гара Разпределителна - кв. Долапите - Петролна база
    'B16': {
        type: 'LineString',
        coordinates: [
            [25.9870, 43.8550],
            [25.9800, 43.8520],
            [25.9700, 43.8490],
            [25.9600, 43.8450],
            [25.9500, 43.8400],
            [25.9400, 43.8300],
            [25.9350, 43.8150],
            [25.9310, 43.7970],
            [25.9250, 43.7920],
            [25.9200, 43.7900]
        ]
    },

    // Bus Line 18: Хиподрум - ж.к. Дружба 3
    'B18': {
        type: 'LineString',
        coordinates: [
            [25.9680, 43.8200],
            [25.9650, 43.8250],
            [25.9600, 43.8300],
            [25.9556, 43.8334],
            [25.9540, 43.8400],
            [25.9533, 43.8479],
            [25.9580, 43.8450],
            [25.9650, 43.8420],
            [25.9600, 43.8350],
            [25.9620, 43.8300],
            [25.9680, 43.8270],
            [25.9720, 43.8267]
        ]
    },

    // Bus Line 19: Метро - Кооперативен пазар
    'B19': {
        type: 'LineString',
        coordinates: [
            [25.9600, 43.8420],
            [25.9620, 43.8450],
            [25.9680, 43.8480],
            [25.9750, 43.8500],
            [25.9850, 43.8530],
            [25.9900, 43.8540],
            [25.9700, 43.8500],
            [25.9600, 43.8480],
            [25.9533, 43.8479],
            [25.9550, 43.8440],
            [25.9580, 43.8400]
        ]
    },

    // Bus Line 20: Гимназия по корабостроене - ж.к. Изток
    'B20': {
        type: 'LineString',
        coordinates: [
            [25.9600, 43.8560],
            [25.9560, 43.8520],
            [25.9533, 43.8479],
            [25.9580, 43.8450],
            [25.9650, 43.8420],
            [25.9680, 43.8400]
        ]
    },

    // Bus Line 23: ж.к. Дружба 3 - пл. Хан Крум
    'B23': {
        type: 'LineString',
        coordinates: [
            [25.9720, 43.8267],
            [25.9680, 43.8290],
            [25.9620, 43.8300],
            [25.9550, 43.8280],
            [25.9560, 43.8350],
            [25.9533, 43.8479],
            [25.9520, 43.8510]
        ]
    },

    // Bus Line 28: ж.к. Дружба 3 - Индустриален парк
    'B28': {
        type: 'LineString',
        coordinates: [
            [25.9720, 43.8267],
            [25.9680, 43.8320],
            [25.9620, 43.8380],
            [25.9533, 43.8479],
            [25.9560, 43.8445],
            [25.9620, 43.8470],
            [25.9680, 43.8510],
            [25.9760, 43.8556],
            [25.9800, 43.8600],
            [25.9850, 43.8650]
        ]
    },

    // Bus Line 30: ж.к. Чародейка - Център
    'B30': {
        type: 'LineString',
        coordinates: [
            [25.9680, 43.8330],
            [25.9650, 43.8360],
            [25.9600, 43.8400],
            [25.9560, 43.8440],
            [25.9533, 43.8479]
        ]
    },

    // Bus Line 33: Гара Разпределителна - Образцов чифлик
    'B33': {
        type: 'LineString',
        coordinates: [
            [25.9870, 43.8550],
            [25.9820, 43.8520],
            [25.9750, 43.8500],
            [25.9650, 43.8470],
            [25.9533, 43.8479],
            [25.9556, 43.8334],
            [25.9600, 43.8300],
            [25.9650, 43.8280]
        ]
    }
};

/**
 * Stop markers data with coordinates
 */
const STOP_MARKERS = [
    // Main interchanges
    { name: 'пл. Оборище', lat: 43.8479, lng: 25.9533, type: 'major', lines: ['T2', 'T9', 'T13', 'T21', 'T24', 'T27', 'B6', 'B11', 'B15', 'B18', 'B19', 'B23', 'B28', 'B30', 'B33'] },
    { name: 'Централна ЖП гара', lat: 43.8334, lng: 25.9556, type: 'major', lines: ['T24', 'B4', 'B5', 'B10', 'B11', 'B12', 'B15', 'B18', 'B33'] },
    { name: 'Мол Русе', lat: 43.8540, lng: 25.9900, type: 'major', lines: ['T2', 'T13', 'T21', 'B19'] },
    { name: 'Автогара Изток', lat: 43.8520, lng: 25.9820, type: 'major', lines: ['T13', 'T21', 'B4', 'B16', 'B33'] },

    // Residential areas - SOUTH
    { name: 'ж.к. Чародейка', lat: 43.8330, lng: 25.9680, type: 'terminal', lines: ['T2', 'T9', 'B30'] },
    { name: 'ж.к. Чародейка Юг', lat: 43.828, lng: 25.966, type: 'terminal', lines: ['T21', 'T29'] },
    { name: 'ж.к. Дружба 1', lat: 43.828, lng: 25.955, type: 'regular', lines: ['T9', 'B18', 'B23'] },
    { name: 'ж.к. Дружба 2', lat: 43.8244, lng: 25.9620, type: 'regular', lines: ['T13', 'B18', 'B23'] },
    { name: 'ж.к. Дружба 3', lat: 43.8267, lng: 25.9720, type: 'terminal', lines: ['T2', 'T24', 'B12', 'B18', 'B23', 'B28'] },

    // NORTHEAST - University/Sugar factory area
    { name: 'ж.к. Цветница', lat: 43.8600, lng: 25.9750, type: 'regular', lines: ['T27', 'T29', 'B11', 'B12', 'B28'] },
    { name: 'Русенски университет', lat: 43.8556, lng: 25.9760, type: 'major', lines: ['T27', 'T29', 'B11', 'B12', 'B28'] },
    { name: 'Окръжна болница', lat: 43.8510, lng: 25.9680, type: 'major', lines: ['T27', 'T29', 'B11', 'B28'] },
    { name: 'Захарен завод', lat: 43.8680, lng: 25.9860, type: 'terminal', lines: ['T29', 'B11', 'B12'] },
    { name: 'ж.к. Тракция', lat: 43.8640, lng: 25.9800, type: 'regular', lines: ['T29', 'B11', 'B12'] },

    // NORTH - Danube area
    { name: 'Гара Разпределителна', lat: 43.8550, lng: 25.9870, type: 'terminal', lines: ['T13', 'T21', 'B16', 'B33'] },
    { name: 'Дунав мост', lat: 43.8886, lng: 26.0061, type: 'terminal', lines: ['B11'] },
    { name: 'Митница', lat: 43.8820, lng: 26.0010, type: 'regular', lines: ['B11'] },

    // Important stops - CENTER
    { name: 'Кауфланд', lat: 43.8480, lng: 25.9680, type: 'regular', lines: ['T2', 'T13', 'T21', 'B6', 'B18', 'B19'] },
    { name: 'бул. Липник', lat: 43.8450, lng: 25.9650, type: 'regular', lines: ['T2', 'T9', 'T13', 'T21', 'B6', 'B15', 'B16', 'B18', 'B19', 'B23', 'B28', 'B33'] },
    { name: 'Олимп', lat: 43.8500, lng: 25.9750, type: 'regular', lines: ['T2', 'T13', 'T21', 'B19'] },
    { name: 'Спортна зала ОЗК Арена', lat: 43.8445, lng: 25.9560, type: 'regular', lines: ['T24', 'T27', 'T29', 'B11', 'B28'] },
    { name: 'Пантеона', lat: 43.8460, lng: 25.9580, type: 'regular', lines: ['T24', 'T27', 'T29', 'B11', 'B28'] },
    { name: 'Хиподрум', lat: 43.8200, lng: 25.9680, type: 'regular', lines: ['T24', 'B12', 'B18'] },

    // FAR WEST - Долапите area
    { name: 'кв. Долапите', lat: 43.797, lng: 25.931, type: 'terminal', lines: ['B15', 'B16'] },
    { name: 'кв. Средна кула', lat: 43.8050, lng: 25.9250, type: 'terminal', lines: ['B3'] },

    // SOUTH - Other neighborhoods
    { name: 'кв. Мальовица', lat: 43.8098, lng: 25.9398, type: 'terminal', lines: ['B11'] },
    { name: 'кв. Здравец', lat: 43.8180, lng: 25.9580, type: 'terminal', lines: ['B10'] },
    { name: 'кв. Образцов чифлик', lat: 43.8280, lng: 25.9650, type: 'terminal', lines: ['B5', 'B33'] },

    // Additional stops
    { name: 'Метро', lat: 43.8420, lng: 25.9600, type: 'regular', lines: ['B19'] },
    { name: 'Дом на културата', lat: 43.8495, lng: 25.9510, type: 'regular', lines: ['B6'] },
    { name: 'Печатни платки', lat: 43.8400, lng: 25.9600, type: 'regular', lines: ['T2', 'T9', 'T21', 'T29', 'B30'] },
];

/**
 * Calculate estimated arrival time based on schedule and current time
 */
function calculateEstimatedArrival(line, stopName) {
    const now = new Date();
    const currentHour = now.getHours();
    const currentMinute = now.getMinutes();
    const isWeekend = now.getDay() === 0 || now.getDay() === 6;

    const schedule = isWeekend ? line.schedule.weekend : line.schedule.weekday;

    if (!schedule.first) {
        return { available: false, message: 'Не се движи днес' };
    }

    const [firstHour, firstMin] = schedule.first.split(':').map(Number);
    const [lastHour, lastMin] = schedule.last.split(':').map(Number);

    const currentTimeMinutes = currentHour * 60 + currentMinute;
    const firstTimeMinutes = firstHour * 60 + firstMin;
    const lastTimeMinutes = lastHour * 60 + lastMin;

    if (currentTimeMinutes < firstTimeMinutes) {
        return {
            available: true,
            nextArrival: schedule.first,
            message: `Първи курс в ${schedule.first}`
        };
    }

    if (currentTimeMinutes > lastTimeMinutes) {
        return {
            available: false,
            message: `Последен курс беше в ${schedule.last}`
        };
    }

    const frequencyMatch = schedule.frequency.match(/(\d+)/);
    const avgFrequency = frequencyMatch ? parseInt(frequencyMatch[1]) : 15;

    const stopIndex = line.stops.indexOf(stopName);
    const stopPosition = stopIndex >= 0 ? stopIndex / line.stops.length : 0.5;

    const minutesUntilNext = Math.floor(Math.random() * avgFrequency);
    const nextArrivalMinutes = currentTimeMinutes + minutesUntilNext;
    const nextHour = Math.floor(nextArrivalMinutes / 60);
    const nextMin = nextArrivalMinutes % 60;

    return {
        available: true,
        nextArrival: `${String(nextHour).padStart(2, '0')}:${String(nextMin).padStart(2, '0')}`,
        minutesUntil: minutesUntilNext,
        message: minutesUntilNext <= 1 ? 'Пристига!' : `След ~${minutesUntilNext} мин`,
        frequency: schedule.frequency
    };
}

/**
 * Create GeoJSON FeatureCollection for all routes
 */
function createRoutesGeoJSON() {
    const features = [];

    TRANSIT_DATA.trolleybusLines.forEach(line => {
        if (ROUTE_GEOMETRIES[line.id]) {
            features.push({
                type: 'Feature',
                properties: {
                    id: line.id,
                    number: line.number,
                    name: line.name,
                    type: 'trolleybus',
                    route: line.route,
                    color: line.color
                },
                geometry: ROUTE_GEOMETRIES[line.id]
            });
        }
    });

    TRANSIT_DATA.busLines.forEach(line => {
        if (ROUTE_GEOMETRIES[line.id]) {
            features.push({
                type: 'Feature',
                properties: {
                    id: line.id,
                    number: line.number,
                    name: line.name,
                    type: 'bus',
                    route: line.route,
                    color: line.color
                },
                geometry: ROUTE_GEOMETRIES[line.id]
            });
        }
    });

    return {
        type: 'FeatureCollection',
        features: features
    };
}

/**
 * Create GeoJSON FeatureCollection for stops
 */
function createStopsGeoJSON() {
    return {
        type: 'FeatureCollection',
        features: STOP_MARKERS.map(stop => ({
            type: 'Feature',
            properties: {
                name: stop.name,
                type: stop.type,
                lines: stop.lines
            },
            geometry: {
                type: 'Point',
                coordinates: [stop.lng, stop.lat]
            }
        }))
    };
}

if (typeof module !== 'undefined' && module.exports) {
    module.exports = { ROUTE_GEOMETRIES, STOP_MARKERS, createRoutesGeoJSON, createStopsGeoJSON, calculateEstimatedArrival };
}
